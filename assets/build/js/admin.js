!function(t){var n={};function d(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,d),i.l=!0,i.exports}d.m=t,d.c=n,d.d=function(e,i,t){d.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:t})},d.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},d.t=function(i,e){if(1&e&&(i=d(i)),8&e)return i;if(4&e&&"object"==typeof i&&i&&i.__esModule)return i;var t=Object.create(null);if(d.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:i}),2&e&&"string"!=typeof i)for(var n in i)d.d(t,n,function(e){return i[e]}.bind(null,n));return t},d.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return d.d(i,"a",i),i},d.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)},d.p="",d(d.s=2)}([,,function(e,i,t){"use strict";t.r(i);t(3);function d(e,i){for(var t=0;t<i.length;t++){var n=i[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}window.$=window.$||jQuery;var a=function(){function t(e,i){!function(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.menuLi=e,this.menuId=i,this.mediaModal={},e.length&&(this.destroy=this.destroy.bind(this),this.handleRadioImage=this.handleRadioImage.bind(this),this.handleRadioShortcode=this.handleRadioShortcode.bind(this),this.handleRadioHtml=this.handleRadioHtml.bind(this),this.openMediaModal=this.openMediaModal.bind(this),this.handleMediaModalOpen=this.handleMediaModalOpen.bind(this),this.handleMediaModalClose=this.handleMediaModalClose.bind(this),this.setMediaUploader=this.setMediaUploader.bind(this),this.radioImage=$("#menu-item-selected-feature-radio-image-"+this.menuId),this.radioShortcode=$("#menu-item-selected-feature-radio-shortcode-"+this.menuId),this.radioHtml=$("#menu-item-selected-feature-radio-html-"+this.menuId),this.deleteButton=this.menuLi.find("#delete-"+this.menuId),this.radioImage.on("click",this.handleRadioImage),this.radioShortcode.on("click",this.handleRadioShortcode),this.radioHtml.on("click",this.handleRadioHtml),this.deleteButton.on("click",this.destroy),this.radioImage.prop("checked")?this.setMediaUploader():this.radioHtml.prop("checked")&&this.initTinyMce(),this.imageP=this.menuLi.find(".menu-item-media-p-"+this.menuId),this.shortcodeP=this.menuLi.find(".menu-item-shortcode-p-"+this.menuId),this.htmlP=this.menuLi.find(".menu-item-html-p-"+this.menuId))}var e,i,n;return e=t,(i=[{key:"setMediaUploader",value:function(){this.mediaUploaderButton||(this.mediaUploaderButton=$("#custom-field-select-image-"+this.menuId),this.mediaUploaderButton.on("click",this.openMediaModal))}},{key:"handleRadioImage",value:function(){this.setMediaUploader(),this.imageP.removeClass("menu-item-hidden"),this.shortcodeP.addClass("menu-item-hidden"),this.htmlP.addClass("menu-item-hidden")}},{key:"handleRadioShortcode",value:function(){this.imageP.addClass("menu-item-hidden"),this.shortcodeP.removeClass("menu-item-hidden"),this.htmlP.addClass("menu-item-hidden")}},{key:"handleRadioHtml",value:function(){void 0===window.tinymce||window.tinymce.get("menu-item-custom-html-"+this.menuId)||this.initTinyMce(),this.imageP.addClass("menu-item-hidden"),this.shortcodeP.addClass("menu-item-hidden"),this.htmlP.removeClass("menu-item-hidden")}},{key:"destroy",value:function(){this.mediaUploaderButton&&(this.mediaUploaderButton.off("click",this.openMediaModal),this.mediaModal=null),void 0!==wp.editor&&wp.editor.remove("menu-item-custom-html-"+this.menuId),this.radioImage.off("click",this.handleRadioImage),this.radioShortcode.off("click",this.handleRadioShortcode),this.radioHtml.off("click",this.handleRadioHtml)}},{key:"initTinyMce",value:function(){if(void 0!==window.tinymce){var e="menu-item-custom-html-"+this.menuId,i=window.tinymce.get(e);i||(wp.editor.initialize(e,{tinymce:{wpautop:!0,height:"170px"},quicktags:!0,mediaButtons:!1}),i=window.tinymce.get(e)),i.on("change",function(){window.tinymce.triggerSave()})}}},{key:"openMediaModal",value:function(){var e={title:wpMenuCustomFields.selectMediaText,multiple:!1,library:{type:["image"]}};this.mediaModal=wp.media(e),this.mediaModal.on("open",this.handleMediaModalOpen),this.mediaModal.on("close",this.handleMediaModalClose),this.mediaModal.open()}},{key:"handleMediaModalOpen",value:function(){var e=$("#menu-item-media-id-"+this.menuId).val();if(e){var i=wp.media.attachment(e);i&&(i.fetch(),this.mediaModal.state().get("selection").add(i?[i]:[]))}}},{key:"handleMediaModalClose",value:function(){var e=this.mediaModal.state().get("selection"),i=!1,t=!1,n=!1;if(!e.length)return $("#menu-item-media-id-"+this.menuId).val(""),$("#menu-item-media-type-"+this.menuId).val(""),void $("#menu-item-selected-media-display-paragraph-"+this.menuId).html("");if(e.each(function(e){i=e.id,e.attributes&&(t=e.attributes.url,n=e.attributes.type)}),i&&t&&"image"===n){$("#menu-item-media-id-"+this.menuId).val(i),$("#menu-item-media-type-"+this.menuId).val(n);var d=$("<img>",{height:"100",src:t});$("#menu-item-selected-media-display-paragraph-"+this.menuId).html(d)}}}])&&d(e.prototype,i),n&&d(e,n),t}(),n={initializedNavMenuIds:{},init:function(){var n=this;this.menuContainer=$("#menu-to-edit"),this.menuContainer.on("click",".item-edit",function(e){var i=n.getMenuId($(e.target));if(void 0===n.initializedNavMenuIds[i]){var t=$("#menu-item-".concat(i));new a(t,i),n.initializedNavMenuIds[i]=!0}})},getMenuId:function(e){return e&&e.prop("id").length?e.prop("id").replace(/[^\d.]/g,""):""}};$(document).ready(function(){n.init()})},function(e,i,t){}]);