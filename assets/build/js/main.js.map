{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/main.js","webpack:///./src/scss/main.scss"],"names":["window","$","jQuery","NavMenuItem","menuLi","menuId","mediaModal","length","openMediaModal","bind","destroy","handleMediaModalOpen","handleMediaModalClose","initTinyMce","mediaUploaderButton","find","deleteButton","on","off","tinymce","selector","remove","init","setup","editor","triggerSave","config","title","wpMenuCustomFields","selectMediaText","multiple","library","type","wp","media","open","mediaId","val","attachment","fetch","state","get","add","selection","mediaUrl","mediaType","html","css","each","id","attributes","url","NavMenu","initializedNavMenuIds","menuContainer","e","getMenuId","target","element","prop","replace"],"mappings":"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","file":"js/main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/js/main.js\");\n","/**\n * Main scripts, loaded on all pages.\n *\n * @package wp-menu-custom-fields\n */\n\n/**\n * Internal dependencies\n */\nimport '../scss/main.scss';\n\nwindow.$ = window.$ || jQuery;\n\n/**\n * Single nav menu Item.\n *\n * @type {Object}\n */\nclass NavMenuItem {\n\n\t/**\n\t * Initialize.\n\t *\n\t * @param {Element} menuLi Menu item li with class 'menu-item\n\t * @param {int|string} menuId  Menu id.\n\t *\n\t * @return {void}\n\t */\n\tconstructor( menuLi, menuId ) {\n\t\tthis.menuLi = menuLi;\n\t\tthis.menuId = menuId;\n\t\tthis.mediaModal = {};\n\n\t\tif ( ! menuLi.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.openMediaModal = this.openMediaModal.bind( this );\n\t\tthis.destroy = this.destroy.bind( this );\n\t\tthis.handleMediaModalOpen = this.handleMediaModalOpen.bind( this );\n\t\tthis.handleMediaModalClose = this.handleMediaModalClose.bind( this );\n\t\tthis.initTinyMce = this.initTinyMce.bind( this );\n\n\t\tthis.mediaUploaderButton = this.menuLi.find( '#custom-field-select-image-' + this.menuId );\n\t\tthis.deleteButton = this.menuLi.find( '#delete-' + this.menuId );\n\n\t\tthis.mediaUploaderButton.on( 'click', this.openMediaModal );\n\t\tthis.deleteButton.on( 'click', this.destroy );\n\n\t\tthis.initTinyMce();\n\t}\n\n\t/**\n\t * Remove all event listeners, destroy tinyMCE.\n\t *\n\t * @return {void}\n\t */\n\tdestroy() {\n\t\tthis.mediaUploaderButton.off( 'click', this.openMediaModal );\n\t\tthis.mediaModal = null;\n\n\t\tif ( 'undefined' !== typeof tinymce ) {\n\t\t\tconst selector = '#menu-item-custom-html-' + this.menuId;\n\t\t\ttinymce.remove( selector );\n\t\t}\n\t}\n\n\tinitTinyMce() {\n\t\tif ( 'undefined' !== typeof tinymce ) {\n\t\t\tconst selector = '#menu-item-custom-html-' + this.menuId;\n\n\t\t\ttinymce.init( {\n\t\t\t\tselector: selector,\n\t\t\t\tsetup: ( editor ) => {\n\t\t\t\t\teditor.on( 'change', () => {\n\t\t\t\t\t\ttinymce.triggerSave();\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\t/**\n\t * Open media library modal.\n\t *\n\t * @return {void}\n\t */\n\topenMediaModal() {\n\t\tconst config = {\n\t\t\ttitle: wpMenuCustomFields.selectMediaText,\n\t\t\tmultiple: false,\n\t\t\tlibrary: {\n\t\t\t\ttype: [ 'image' ]\n\t\t\t}\n\t\t};\n\n\t\tthis.mediaModal = wp.media( config );\n\t\tthis.mediaModal.on( 'open', this.handleMediaModalOpen );\n\t\tthis.mediaModal.on( 'close', this.handleMediaModalClose );\n\t\tthis.mediaModal.open();\n\t}\n\n\t/**\n\t * Handle media modal open.\n\t *\n\t * @return {void}\n\t */\n\thandleMediaModalOpen() {\n\t\tconst mediaId = jQuery( '#menu-item-media-id-' + this.menuId ).val();\n\t\tif ( ! mediaId ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst attachment = wp.media.attachment( mediaId );\n\t\tif ( attachment ) {\n\t\t\tattachment.fetch();\n\t\t\tthis.mediaModal.state().get( 'selection' ).add( attachment ? [ attachment ] : [] );\n\t\t}\n\t}\n\n\t/**\n\t * Handle media modal close.\n\t *\n\t * @return {void}\n\t */\n\thandleMediaModalClose() {\n\t\tconst selection = this.mediaModal.state().get( 'selection' );\n\t\tlet mediaId = false;\n\t\tlet mediaUrl = false;\n\t\tlet mediaType = false;\n\n\t\tif ( ! selection.length ) {\n\t\t\tjQuery( '#menu-item-media-id-' + this.menuId ).val( '' );\n\t\t\tjQuery( '#menu-item-media-type-' + this.menuId ).val( '' );\n\t\t\tjQuery( '#menu-item-selected-media-display-paragraph-' + this.menuId ).html( '' ).css( 'display', 'none' );\n\n\t\t\treturn;\n\t\t}\n\n\t\tselection.each( ( attachment ) => {\n\t\t\tmediaId = attachment.id;\n\t\t\tif ( attachment.attributes ) {\n\t\t\t\tmediaUrl = attachment.attributes.url;\n\t\t\t\tmediaType = attachment.attributes.type;\n\t\t\t}\n\t\t} );\n\n\t\tif ( ! mediaId || ! mediaUrl ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( 'image' === mediaType ) {\n\t\t\tjQuery( '#menu-item-media-id-' + this.menuId ).val( mediaId );\n\t\t\tjQuery( '#menu-item-media-type-' + this.menuId ).val( mediaType );\n\t\t\tjQuery( '#menu-item-selected-media-display-paragraph-' + this.menuId ).html( '<img height=\"100\" src=\"' + mediaUrl + '\">' ).css( 'display', 'block' );\n\t\t}\n\t}\n}\n\n/**\n * Nav Menus.\n *\n * @type {Object}\n */\nconst NavMenu = {\n\n\t/**\n\t * Initialized nav menu ids.\n\t *\n\t * @type {object}\n\t */\n\tinitializedNavMenuIds: {},\n\n\t/**\n\t * Initialize.\n\t *\n\t * @return {void}\n\t */\n\tinit() {\n\t\tthis.menuContainer = jQuery( '#menu-to-edit' );\n\t\tthis.menuContainer.on( 'click', '.item-edit', ( e ) => {\n\t\t\tconst menuId = this.getMenuId( jQuery( e.target ) );\n\n\t\t\tif ( 'undefined' === typeof this.initializedNavMenuIds[ menuId ] ) {\n\t\t\t\tconst menuLi = jQuery( `#menu-item-${ menuId }` );\n\t\t\t\tnew NavMenuItem( menuLi, menuId );\n\n\t\t\t\tthis.initializedNavMenuIds[ menuId ] = true;\n\t\t\t}\n\t\t} );\n\t},\n\n\t/**\n\t * Get menu id.\n\t *\n\t * @param {Element} element Element.\n\t *\n\t * @return {string}\n\t */\n\tgetMenuId( element ) {\n\t\tif ( ! element ||  ! element.prop( 'id' ).length ) {\n\t\t\treturn '';\n\t\t}\n\n\t\treturn element.prop( 'id' ).replace( /[^\\d.]/g, '' );\n\t}\n};\n\nNavMenu.init();\n","// extracted by mini-css-extract-plugin"],"sourceRoot":""}